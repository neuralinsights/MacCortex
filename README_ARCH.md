# MacCortex

**é¡¹ç›®ä»£å·ï¼šMacCortex**  
**æ ‡é¢˜ï¼šä¸‹ä¸€ä»£ macOS ä¸ªäººæ™ºèƒ½åŸºç¡€è®¾æ–½ï¼ˆPersonal AI Infrastructureï¼‰æ¶æ„è®¾è®¡æ–¹æ¡ˆ**  
**æ–‡æ¡£ç±»å‹ï¼šç™½çš®ä¹¦ï¼ˆWhitepaperï¼‰/ ç«‹é¡¹è®¡åˆ’ä¹¦ / å¼€æºä»“åº“æ¶æ„è¯´æ˜ï¼ˆREADME_ARCH.mdï¼‰**

---

## å…ƒä¿¡æ¯

| å±æ€§ | å€¼ |
|---|---|
| æ–‡æ¡£ç‰ˆæœ¬ | v1.1 (Architecture Design) |
| æœ€åæ›´æ–° | 2026-01-20ï¼ˆä¿®æ­£ Sandbox ç­–ç•¥çŸ›ç›¾ï¼Œå¢åŠ  Phase 0.5ï¼‰ |
| é¡¹ç›®çŠ¶æ€ | Phase 0.5 å®æ–½ä¸­ï¼ˆç­¾åä¸å…¬è¯åŸºç¡€è®¾æ–½ï¼‰ |
| ç›®æ ‡å¹³å° | macOSï¼ˆä¼˜å…ˆåˆ©ç”¨åŸç”Ÿ Vision / Shortcuts / AppleScript / Keychain ç­‰èƒ½åŠ›ï¼‰ |
| æ ¸å¿ƒç†å¿µ | èåˆ **Swarm Intelligenceï¼ˆèœ‚ç¾¤æ™ºèƒ½ï¼‰** ä¸ **Personal Infrastructureï¼ˆä¸ªäººåŸºå»ºï¼‰** |
| è®¾è®¡å…³é”®è¯ | Local-firstã€Human-in-the-loopã€å®‰å…¨å¯å®¡è®¡ã€å¯æ›¿æ¢ç»„ä»¶ã€å¯è¿›åŒ–èƒ½åŠ›åº“ |
| åˆ†å‘ç­–ç•¥ | **é App Sandbox æ¶æ„**ï¼ˆç‹¬ç«‹åˆ†å‘ï¼ŒHomebrew Cask + å®˜ç½‘ä¸‹è½½ï¼‰âš ï¸ |

> **å®šä½ä¸€å¥è¯**ï¼šMacCortex ä¸æ˜¯â€œå¦ä¸€ä¸ªèŠå¤©çª—å£â€ï¼Œè€Œæ˜¯ä¸€å¥—å¯æ’æ‹”çš„ macOS åŸç”Ÿæ™ºèƒ½åŸºç¡€è®¾æ–½ï¼šèƒ½çœ‹è§å±å¹•ã€èƒ½è°ƒç”¨å·¥å…·ã€èƒ½è‡ªæˆ‘çº é”™ã€èƒ½é•¿æœŸè®°ä½ä½ ï¼Œå¹¶ä¸”æŠŠå±é™©åŠ¨ä½œé”åœ¨ç¬¼å­é‡Œã€‚

---

## ç›®å½•

- [1. æ‰§è¡Œæ‘˜è¦](#1-æ‰§è¡Œæ‘˜è¦)
- [2. èƒŒæ™¯ä¸é—®é¢˜é™ˆè¿°](#2-èƒŒæ™¯ä¸é—®é¢˜é™ˆè¿°)
- [3. è®¾è®¡ç›®æ ‡ä¸éç›®æ ‡](#3-è®¾è®¡ç›®æ ‡ä¸éç›®æ ‡)
- [4. ç³»ç»Ÿæ€»è§ˆ](#4-ç³»ç»Ÿæ€»è§ˆ)
- [5. æ ¸å¿ƒæ¨¡å—è®¾è®¡](#5-æ ¸å¿ƒæ¨¡å—è®¾è®¡)
- [6. å…³é”®ä½¿ç”¨åœºæ™¯](#6-å…³é”®ä½¿ç”¨åœºæ™¯)
- [7. æŠ€æœ¯æ ˆä¸å¯æ›¿æ¢ç»„ä»¶](#7-æŠ€æœ¯æ ˆä¸å¯æ›¿æ¢ç»„ä»¶)
- [8. å®‰å…¨æ¨¡å‹ä¸éšç§ç­–ç•¥](#8-å®‰å…¨æ¨¡å‹ä¸éšç§ç­–ç•¥)
- [9. å¯è§‚æµ‹æ€§ä¸è´¨é‡ä¿éšœ](#9-å¯è§‚æµ‹æ€§ä¸è´¨é‡ä¿éšœ)
- [10. å®æ–½è·¯çº¿å›¾ä¸é‡Œç¨‹ç¢‘](#10-å®æ–½è·¯çº¿å›¾ä¸é‡Œç¨‹ç¢‘)
- [11. é£é™©è¯„ä¼°ä¸å¯¹ç­–](#11-é£é™©è¯„ä¼°ä¸å¯¹ç­–)
- [12. å¼€æ”¾é—®é¢˜](#12-å¼€æ”¾é—®é¢˜)
- [é™„å½• Aï¼šå»ºè®®ç›®å½•ç»“æ„](#é™„å½•-aå»ºè®®ç›®å½•ç»“æ„)
- [é™„å½• Bï¼šContext ä¸ Policy ç¤ºä¾‹](#é™„å½•-bcontext-ä¸-policy-ç¤ºä¾‹)
- [é™„å½• Cï¼šæ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰](#é™„å½•-cæ¶æ„å†³ç­–è®°å½•adr)
- [å‚è€ƒä¸ä¸Šæ¸¸é¡¹ç›®](#å‚è€ƒä¸ä¸Šæ¸¸é¡¹ç›®)

---

## 1. æ‰§è¡Œæ‘˜è¦

å½“å‰ AI Agent ç”Ÿæ€å‡ºç°äº†ä¸€ä¸ªå¾ˆå…¸å‹çš„æ–­è£‚ï¼š

- **èœ‚ç¾¤/å¤šä»£ç†ç¼–æ’ï¼ˆSwarmï¼‰**èƒ½æŠŠå¤æ‚ä»»åŠ¡æ‹†åˆ†ç»™å¤šä¸ªè§’è‰²å¹¶è¿­ä»£çº é”™ï¼Œä½†å¸¸å¸¸ç¼ºä¹å¯¹ç”¨æˆ·æœ¬åœ°ç¯å¢ƒçš„â€œæ„ŸçŸ¥â€å’Œå¯¹å±é™©åŠ¨ä½œçš„â€œæ²»ç†â€ã€‚å…¸å‹ä»£è¡¨æ˜¯ **claude-flow** è¿™ä¸€ç±»â€œå¤šä»£ç†ç¼–æ’å¹³å°â€ã€‚
- **ä¸ªäººåŸºå»º/æ¨¡å¼åŒ– Promptï¼ˆPersonal Infrastructure + Patternsï¼‰**èƒ½æŠŠå¸¸ç”¨å·¥ä½œæµç¨‹æ²‰æ·€ä¸ºæ¨¡å—åŒ–æŠ€èƒ½ä¸æ¨¡æ¿ï¼Œé€‚åˆé«˜é¢‘å•ç‚¹ä»»åŠ¡ï¼Œä½†å¯¹â€œé•¿ç¨‹ä»»åŠ¡ + å·¥å…·æ‰§è¡Œ + è‡ªæˆ‘åæ€â€æ”¯æŒä¸è¶³ã€‚å…¸å‹ä»£è¡¨æ˜¯ **Personal AI Infrastructureï¼ˆPAIï¼‰**ä¸ **Fabric Patterns**ã€‚

**MacCortex çš„ç›®æ ‡**ï¼šåœ¨ macOS ä¸Šå®ç°ä¸€ä¸ªâ€œæ„ŸçŸ¥ â†’ å†³ç­– â†’ æ‰§è¡Œâ€çš„é—­ç¯ç³»ç»Ÿã€‚

- åœ¨**ç®€å•ä»»åŠ¡**ä¸Šåšåˆ°ï¼šä½å»¶è¿Ÿã€ä½æˆæœ¬ã€å¼ºç¡®å®šæ€§ï¼ˆPattern Fast Laneï¼‰ã€‚
- åœ¨**å¤æ‚ä»»åŠ¡**ä¸Šåšåˆ°ï¼šå¯ç¼–æ’ã€å¯å¾ªç¯è‡ªçº é”™ã€å¯ä¸­æ–­æ¢å¤ï¼ˆSwarm Slow Laneï¼‰ã€‚
- åœ¨**ç³»ç»Ÿæ‰§è¡Œ**ä¸Šåšåˆ°ï¼šæœ€å°æƒé™ã€é€çº§æˆæƒã€å…¨ç¨‹å®¡è®¡ï¼ˆPolicy + Sandbox + Auditï¼‰ã€‚

> **é‡è¦è¯´æ˜**ï¼š
> - æœ¬æ–‡æ¡£ä¸º v1.1 æ¶æ„è®¾è®¡ç¨¿ï¼ˆ2026-01-20 æ›´æ–°ï¼‰
> - å½“å‰çŠ¶æ€ï¼š**Phase 0.5 å®æ–½ä¸­**ï¼ˆç­¾åã€å…¬è¯ã€æƒé™ç®¡ç†åŸºç¡€è®¾æ–½ï¼‰
> - æ¶æ„å†³ç­–ï¼šé‡‡ç”¨ **é App Sandbox** æ¶æ„ï¼ˆè§ ADR-001ï¼‰
> - æ¶‰åŠçš„æ¨¡å‹ã€æ¡†æ¶ä¸å·¥å…·é“¾å‡ä¸º"å¯æ›¿æ¢ç»„ä»¶"ï¼Œä¸æŠŠä»»ä½•å•ä¸€ä¾›åº”å•†ç»‘å®šæˆä¸å¯æ›¿æ¢ä¾èµ–

---

## 2. èƒŒæ™¯ä¸é—®é¢˜é™ˆè¿°

åŸºäºä½ æä¾›çš„è°ƒç ”ç»“è®ºï¼ˆawesome-ai-agentsã€awesome-claude-code ç­‰å¤§è§„æ¨¡ç”Ÿæ€æ±‡æ€»ï¼‰ï¼Œæˆ‘ä»¬å°†é—®é¢˜å‹ç¼©ä¸ºä¸‰ä¸ªâ€œæ–­å±‚â€ï¼ˆGapï¼‰ï¼š

### 2.1 è®¤çŸ¥æ–­å±‚ï¼ˆCognitive Gapï¼‰

- **Prompt æ¨¡å¼**å¯¹å¤šæ­¥ä»»åŠ¡ï¼ˆå†™ä»£ç ã€è¿è¡Œã€ä¿®å¤ã€å†è¿è¡Œï¼‰å¤©ç„¶åƒåŠ›ã€‚
- **å¤æ‚å¤šä»£ç†æ¡†æ¶**å¯¹â€œæ€»ç»“/æå–/æ ¼å¼è½¬æ¢â€ç­‰è½»ä»»åŠ¡å¾€å¾€è¿‡é‡ï¼šå¯åŠ¨æ…¢ã€äº¤äº’å†—é•¿ã€æˆæœ¬é«˜ã€‚

**éœ€æ±‚ç»“è®º**ï¼šéœ€è¦ä¸€ä¸ªèƒ½è‡ªåŠ¨åˆ‡æ¢â€œå¿«æ€è€ƒ/æ…¢æ€è€ƒâ€çš„ **åŒæ¨¡å¤§è„‘**ï¼ˆDual-Mode Brainï¼‰ã€‚

### 2.2 æ„ŸçŸ¥æ–­å±‚ï¼ˆSensory Gapï¼‰

- å¤§å¤šæ•° AI å·¥å…·â€œä½åœ¨æµè§ˆå™¨é‡Œâ€ï¼Œå¯¹ä½ å½“å‰å±å¹•å†…å®¹ã€é€‰ä¸­æ–‡æœ¬ã€æ´»è·ƒ Appã€ä¸Šä¸‹æ–‡çŠ¶æ€ç¼ºä¹åŸç”Ÿç†è§£ã€‚

**éœ€æ±‚ç»“è®º**ï¼šmacOS ä¸Šå¿…é¡»æœ‰ä¸€ä¸ªé«˜è´¨é‡çš„ **ä¸Šä¸‹æ–‡æ•è·å±‚**ï¼ˆScreen/Selection/Audio as Contextï¼‰ã€‚

### 2.3 è¡ŒåŠ¨æ–­å±‚ï¼ˆAction Gapï¼‰

- å¾ˆå¤šç³»ç»Ÿåœç•™åœ¨â€œå»ºè®®â€ï¼Œä½†æ— æ³•å®‰å…¨åœ°æ‰§è¡Œï¼šç§»åŠ¨æ–‡ä»¶ã€ç”Ÿæˆé¡¹ç›®ã€å†™å…¥ Notesã€æ•´ç†æ—¥ç¨‹ã€‚

**éœ€æ±‚ç»“è®º**ï¼šå¿…é¡»å…·å¤‡ **å·¥å…·æ‰§è¡Œèƒ½åŠ›**ï¼ŒåŒæ—¶å¼•å…¥ **äººæœºå›ç¯ï¼ˆHuman-in-the-loopï¼‰**ä¸ **ç­–ç•¥æ²»ç†ï¼ˆPolicyï¼‰**ï¼Œé¿å…â€œAI ä¸€å¥è¯åˆ åº“è·‘è·¯â€ã€‚

---

## 3. è®¾è®¡ç›®æ ‡ä¸éç›®æ ‡

### 3.1 è®¾è®¡ç›®æ ‡ï¼ˆGoalsï¼‰

1. **åŒé€šé“å†³ç­–**ï¼šRouter å°†ä»»åŠ¡åˆ†é…åˆ° Fast Laneï¼ˆPatternï¼‰æˆ– Slow Laneï¼ˆSwarmï¼‰ã€‚
2. **Local-first**ï¼šé»˜è®¤æœ¬åœ°å¤„ç†ï¼›äº‘ç«¯ä»…åœ¨éœ€è¦æ›´å¼ºæ¨ç†/ç¼–ç¨‹èƒ½åŠ›æ—¶å¯ç”¨ã€‚
3. **å¯å®¡è®¡ä¸å¯å›æ»š**ï¼šæ‰€æœ‰å·¥å…·è°ƒç”¨ã€æ–‡ä»¶å†™å…¥ã€ç½‘ç»œè®¿é—®å¿…é¡»ç•™ä¸‹å¯è¿½æº¯è®°å½•ã€‚
4. **æœ€å°æƒé™**ï¼šæ‰§è¡Œå±‚æŒ‰é£é™©åˆ†çº§ï¼›å†™/åˆ /å¤–è”ç­‰æ•æ„Ÿæ“ä½œå¼ºåˆ¶ç¡®è®¤æˆ–ç­–ç•¥æ”¾è¡Œã€‚
5. **å¯æ‰©å±•**ï¼šé€šè¿‡ MCPï¼ˆModel Context Protocolï¼‰æˆ–ç­‰ä»·æœºåˆ¶æ¥å…¥å·¥å…·ç”Ÿæ€ã€‚
6. **å¯è¿›åŒ–**ï¼šè¾“å‡ºå¯æ²‰æ·€ä¸º Pattern/Skillï¼›æ‰§è¡Œè½¨è¿¹å¯å¤ç›˜ï¼›åå¥½ä¸å†å²å¯å½¢æˆé•¿æœŸè®°å¿†ã€‚

### 3.2 éç›®æ ‡ï¼ˆNon-goalsï¼‰

- ä¸è¿½æ±‚â€œå…¨è‡ªåŠ¨ã€é›¶ç¡®è®¤â€çš„ç³»ç»Ÿçº§è‡ªåŠ¨åŒ–ï¼ˆè‡³å°‘ v1 ä¸åšï¼‰ã€‚
- ä¸æŠŠâ€œæŒç»­ç›‘å¬/å…¨ç¨‹å½•å±â€ä½œä¸ºé»˜è®¤èƒ½åŠ›ï¼ˆéšç§é£é™©æé«˜ï¼Œåªä½œä¸ºå¯é€‰åŠŸèƒ½ï¼‰ã€‚
- ä¸æ‰¿è¯ºæˆä¸ºâ€œé€šç”¨ AGI æ“ä½œç³»ç»Ÿâ€ï¼›èšç„¦å¯æ§ã€å¯ç”¨ã€å¯ç»´æŠ¤çš„ä¸ªäººç”Ÿäº§åŠ›åŸºç¡€è®¾æ–½ã€‚

---

## 4. ç³»ç»Ÿæ€»è§ˆ

### 4.1 æ¶æ„åŸåˆ™

- **åˆ†å±‚æ¸…æ™°**ï¼šæ„ŸçŸ¥ï¼ˆInputï¼‰/ å†³ç­–ï¼ˆBrainï¼‰/ è®°å¿†ï¼ˆInfrastructureï¼‰/ æ‰§è¡Œï¼ˆHandsï¼‰/ æ²»ç†ï¼ˆPolicy & Auditï¼‰ã€‚
- **çŠ¶æ€æ˜¾å¼**ï¼šSlow Lane å¿…é¡»æ˜¯æœ‰çŠ¶æ€çš„å·¥ä½œæµï¼ˆæ”¯æŒå¾ªç¯ã€æ£€æŸ¥ç‚¹ã€æš‚åœ/æ¢å¤ï¼‰ã€‚
- **å·¥å…·éš”ç¦»**ï¼šæ‰§è¡Œå±‚æ°¸è¿œè§†ä¸ºâ€œå±é™©åŒºåŸŸâ€ï¼Œé»˜è®¤åœ¨æ²™ç®±å†…è¿è¡Œã€‚

### 4.2 æ¶æ„å…¨æ™¯å›¾ï¼ˆv1.0ï¼‰

```mermaid
graph TD
    User((User)) -->|Hotkey Cmd+Space| InputLayer["æ„ŸçŸ¥å±‚: Selection + Screen OCR + (Optional) Audio"]

    InputLayer --> Router{Intent Router + Risk Scoring}

    subgraph Governance[æ²»ç†å±‚: Policy & Audit]
        Policy[Policy Engine: å·¥å…·ç™½åå•/æƒé™/æ•æ„Ÿè·¯å¾„]
        Audit[(Audit Log: è½¨è¿¹/æˆæœ¬/å·®å¼‚diff/è„±æ•)]
        Secrets[Secrets: Keychain/Env éš”ç¦»]
    end

    Router --> Policy

    %% å¿«æ€è€ƒ
    Policy -->|Low-risk| FabricEngine[Fast Lane: Pattern Engine]
    FabricEngine -.->|Load| PatternLib[Local Patterns / Skills]

    %% æ…¢æ€è€ƒ
    Policy -->|Complex| SwarmEngine["Slow Lane: Orchestrator (LangGraph æˆ– claude-flow é€‚é…å±‚)"]

    subgraph SwarmTeam[Swarm Team]
        SwarmEngine --> Planner[Planner]
        SwarmEngine --> Researcher[Researcher]
        SwarmEngine --> Coder[Coder]
        SwarmEngine --> Reviewer[Critic/Reviewer]
        Coder <--> Reviewer
        Planner <--> Researcher
    end

    subgraph Memory[è®°å¿†å±‚]
        ContextWindow[context.json: çŸ­æœŸå±å¹•/é€‰æ‹©ä¸Šä¸‹æ–‡]
        VectorDB[(Vector Memory: ChromaDB/å¯æ›¿æ¢)]
        History[(History Store: ä»»åŠ¡è½¨è¿¹/å·¥ä»¶/å¯å¤ç›˜)]
    end

    subgraph Execution[æ‰§è¡Œå±‚]
        Shell["Shell/Python: Open Interpreter(æˆ–ç­‰ä»·æ‰§è¡Œå™¨)"]
        MacBridge[JXA/AppleScript/Shortcuts]
        MCP[MCP Client: tools/resources/prompts]
        Sandbox[Sandbox: container/VM/æƒé™éš”ç¦»]
    end

    InputLayer --> ContextWindow
    FabricEngine <--> VectorDB
    SwarmEngine <--> VectorDB
    SwarmEngine <--> History

    SwarmEngine --> MCP --> Sandbox
    Shell --> Sandbox
    MacBridge --> Sandbox

    Sandbox --> MacOS[macOS System & Native Apps]
    Sandbox --> Audit
```

---

## 5. æ ¸å¿ƒæ¨¡å—è®¾è®¡

æœ¬èŠ‚æŒ‰å±‚è¯´æ˜ï¼šè¾“å…¥ã€è·¯ç”±ã€å¿«æ€è€ƒã€æ…¢æ€è€ƒã€è®°å¿†ã€æ‰§è¡Œã€æ‰©å±•ã€‚

### 5.1 L1 æ„ŸçŸ¥å±‚ï¼ˆInputï¼‰

**ç›®æ ‡**ï¼šæ›¿ä»£â€œçº¯æ–‡æœ¬è¾“å…¥â€ï¼ŒæŠŠç”¨æˆ·å½“å‰å·¥ä½œä¸Šä¸‹æ–‡æ³¨å…¥ç³»ç»Ÿã€‚

**èƒ½åŠ›æ¸…å•ï¼ˆv1ï¼‰**

- **Selection Capture**ï¼šè¯»å–å½“å‰é€‰ä¸­æ–‡æœ¬ï¼ˆä¼˜å…ˆï¼‰ã€‚
  - âš ï¸ **éœ€è¦æƒé™**ï¼šmacOS **Accessibility æƒé™**ï¼ˆç³»ç»Ÿåå¥½è®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§ â†’ è¾…åŠ©åŠŸèƒ½ï¼‰
  - å®ç°æ–¹å¼ï¼š`AXUIElement` APIï¼ˆmacOS åŸç”Ÿæ— éšœç¢ APIï¼‰
  - é™çº§ç­–ç•¥ï¼šç”¨æˆ·æ‹’ç»æˆæƒæ—¶å›é€€åˆ°"æ‰‹åŠ¨å¤åˆ¶æ–‡æœ¬"æ¨¡å¼
- **Screen Snapshot + OCRï¼ˆå¯é€‰ï¼‰**ï¼šå¯¹å½“å‰æ´»åŠ¨çª—å£/å±å¹•åŒºåŸŸæˆªå›¾ï¼Œä½¿ç”¨ macOS åŸç”Ÿ OCRï¼ˆVision æ¡†æ¶ï¼‰æå–æ–‡æœ¬ã€‚
  - âš ï¸ **éœ€è¦æƒé™**ï¼šmacOS **Screen Recording æƒé™**ï¼ˆå¯é€‰åŠŸèƒ½ï¼Œé»˜è®¤å…³é—­ï¼‰
- **App/Workspace Context**ï¼šå½“å‰å‰å°åº”ç”¨ã€çª—å£æ ‡é¢˜ã€è·¯å¾„ï¼ˆè‹¥åœ¨ Terminal/IDEï¼‰ã€‚
- **(Optional) Audio**ï¼šè¯­éŸ³è¾“å…¥/å…³é”®è¯å”¤é†’ï¼ˆé»˜è®¤å…³é—­ï¼Œé¿å…éšç§ä¸ç”µé‡é—®é¢˜ï¼‰ã€‚

**æƒé™æˆæƒç­–ç•¥ï¼ˆå…³é”®ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼‰**

MacCortex é¦–æ¬¡å¯åŠ¨éœ€è¦ **ä¸¤ä¸ªæ•æ„Ÿæƒé™**ï¼š
1. **Full Disk Access**ï¼ˆè¯»å–æ–‡ä»¶ç³»ç»Ÿ/Notesï¼‰- Phase 0.5 å·²å®ç°
2. **Accessibility**ï¼ˆè¯»å–é€‰ä¸­æ–‡æœ¬ï¼‰- Phase 2 å®ç°

ä¸ºé™ä½ç”¨æˆ·æµå¤±ç‡ï¼Œé‡‡ç”¨ **ç»Ÿä¸€æˆæƒå¼•å¯¼**ï¼š
- åœ¨åŒä¸€ä¸ª UI æµç¨‹ä¸­è¯´æ˜ä¸¤ä¸ªæƒé™çš„ç”¨é€”
- æä¾› 15 ç§’æ¼”ç¤ºè§†é¢‘ï¼ˆä¸€æ¬¡æ€§å±•ç¤ºæ‰€æœ‰æˆæƒæ­¥éª¤ï¼‰
- æ”¯æŒ"ç¨åæˆæƒ"ï¼ˆè¿›å…¥é™çº§æ¨¡å¼ï¼‰

**è¾“å‡º**ï¼šå†™å…¥ `context.json`ï¼ˆçŸ­æœŸä¸Šä¸‹æ–‡ï¼‰ï¼Œä¾› Router/Pattern/Swarm ä½¿ç”¨ã€‚

> å¯é æ€§åŸåˆ™ï¼šæ„ŸçŸ¥å±‚ä¸ç›´æ¥è§¦å‘æ‰§è¡Œï¼›åªç”Ÿæˆ"ä¸Šä¸‹æ–‡"ï¼Œè®©å†³ç­–å±‚å¯æ§åœ°è°ƒç”¨ã€‚

---

### 5.2 L2 ä¸­æ¢å±‚ï¼ˆBrainï¼‰ï¼šRouter + Policy

#### 5.2.1 Routerï¼šæ„å›¾è¯†åˆ«ä¸é£é™©åˆ†çº§

Router åšä¸¤ä»¶äº‹ï¼š

1. **Intent åˆ†ç±»**ï¼ˆæ€»ç»“/æå–/å†™ä»£ç /è°ƒç ”/ç³»ç»Ÿæ“ä½œ/å®‰å…¨åˆ†æç­‰ï¼‰
2. **Risk åˆ†çº§**ï¼ˆåªè¯»/å†™å…¥/åˆ é™¤/å¤–è”/æƒé™æ•æ„Ÿï¼‰

**å®ç°ç­–ç•¥ï¼ˆå»ºè®® v1ï¼‰**

- ä¼˜å…ˆä½¿ç”¨**æœ¬åœ°å°æ¨¡å‹**æˆ–è½»é‡è§„åˆ™è¿›è¡Œè·¯ç”±ï¼ˆå‡å°‘æˆæœ¬ã€é¿å…æ³„éœ²æ•æ„Ÿä¸Šä¸‹æ–‡ï¼‰ã€‚
- å¯¹é«˜é£é™©æ„å›¾ï¼ˆæ–‡ä»¶å†™å…¥ã€åˆ é™¤ã€ç½‘ç»œè¯·æ±‚ã€ç³»ç»Ÿè®¾ç½®ä¿®æ”¹ï¼‰æé«˜é˜ˆå€¼ï¼Œå°½é‡è¦æ±‚æ˜ç¡®æŒ‡ä»¤ä¸äºŒæ¬¡ç¡®è®¤ã€‚

#### 5.2.2 Policy Engineï¼šå·¥å…·æ²»ç†ä¸æƒé™ç³»ç»Ÿ

Policy Engine æ˜¯ MacCortex çš„â€œæ³•å¾‹ç³»ç»Ÿâ€ã€‚å®ƒå†³å®š **å…è®¸ä»€ä¹ˆå·¥å…·åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹è¿è¡Œ**ã€‚

å»ºè®®çš„é£é™©åˆ†çº§ï¼š

- **R0ï¼ˆRead-onlyï¼‰**ï¼šè¯»å–æ–‡ä»¶ã€åˆ—ç›®å½•ã€è¯»å– Notesã€åªè¯»æœç´¢ã€‚
- **R1ï¼ˆWriteï¼‰**ï¼šå†™æ–‡ä»¶ã€é‡å‘½å/ç§»åŠ¨ã€å†™å…¥ Notesã€‚
- **R2ï¼ˆDestructiveï¼‰**ï¼šåˆ é™¤ã€è¦†ç›–ã€æ‰¹é‡ä¿®æ”¹ã€æ”¹ç³»ç»Ÿè®¾ç½®ã€‚
- **R3ï¼ˆExfiltrationï¼‰**ï¼šå¤–å‘ç½‘ç»œè¯·æ±‚ã€ä¸Šä¼ æ–‡ä»¶ã€è°ƒç”¨ç¬¬ä¸‰æ–¹ APIã€‚

ç­–ç•¥å»ºè®®ï¼š

- R0ï¼šå¯è‡ªåŠ¨æ‰§è¡Œ
- R1ï¼šé»˜è®¤éœ€è¦ç¡®è®¤ï¼ˆå¯å¯¹ç‰¹å®šç›®å½•/åº”ç”¨æ”¾è¡Œï¼‰
- R2/R3ï¼šé»˜è®¤ç¦æ­¢ï¼Œæˆ–å¿…é¡»æ‰‹åŠ¨è¾“å…¥ç¡®è®¤çŸ­è¯­ï¼ˆå¹¶æä¾› dry-run/diffï¼‰

---

### 5.3 Fast Laneï¼šPattern Engineï¼ˆFabric/PAI çš„â€œç§¯æœ¨åŒºâ€ï¼‰

**å®šä½**ï¼šæŠŠé«˜é¢‘ä»»åŠ¡å›ºåŒ–ä¸ºå¯ç‰ˆæœ¬åŒ–ã€å¯å¤ç”¨ã€å¯å®¡è®¡çš„æ¨¡å¼ã€‚

#### 5.3.1 Pattern è§„èŒƒ

- Pattern ä½¿ç”¨ **Markdown** è¡¨è¾¾ç»“æ„åŒ–æŒ‡ä»¤ï¼ˆæ˜“è¯»ã€æ˜“æ”¹ã€å¯ä»£ç å®¡æŸ¥ï¼‰ã€‚
- Pattern åˆ†ä¸ºï¼š`system.md`ï¼ˆæ ¸å¿ƒæŒ‡ä»¤ï¼‰+ å¯é€‰ `example.md`/`tests.md`ã€‚

#### 5.3.2 è¿è¡Œæ¨¡å‹

- é»˜è®¤ï¼šæœ¬åœ°æ¨¡å‹ï¼ˆéšç§ä¼˜å…ˆã€æˆæœ¬å¯æ§ï¼‰
- å¯é€‰ï¼šäº‘ç«¯æ¨¡å‹ï¼ˆå½“ Pattern éœ€è¦æ›´å¼ºå†™ä½œ/æ¨ç†èƒ½åŠ›æ—¶ï¼‰

#### 5.3.3 Pattern è´¨é‡æ§åˆ¶

- æ¯ä¸ª Pattern åº”æœ‰ï¼š
  - è¾“å…¥çº¦æŸï¼ˆè¾“å…¥ç±»å‹ã€é•¿åº¦ã€æ¥æºï¼‰
  - è¾“å‡ºå¥‘çº¦ï¼ˆMarkdown/JSON/è¡¨æ ¼ç­‰ï¼‰
  - æœ€å°‘ä¸€ç»„å›å½’æµ‹è¯•æ ·ä¾‹ï¼ˆé¿å…â€œæ”¹æ¨¡æ¿åè¾“å‡ºå´©åâ€ï¼‰

---

### 5.4 Slow Laneï¼šSwarm Engineï¼ˆå¤æ‚ä»»åŠ¡ç¼–æ’ä¸è‡ªçº é”™ï¼‰

**å®šä½**ï¼šå¤„ç†â€œé•¿ç¨‹ä»»åŠ¡ + å·¥å…·è°ƒç”¨ + å¤šè½®ä¿®æ­£â€çš„ä»»åŠ¡ã€‚

#### 5.4.1 å·¥ä½œæµå†…æ ¸ï¼šPlan â†’ Execute â†’ Reflectï¼ˆå¾ªç¯å›¾ï¼‰

Slow Lane å¿…é¡»æ˜¯**å¯å¾ªç¯**çš„ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§é“¾å¼è°ƒç”¨ã€‚

- **Planner**ï¼šæ‹†è§£ä»»åŠ¡ï¼Œå®šä¹‰éªŒæ”¶æ¡ä»¶ã€‚
- **Executorï¼ˆResearcher/Coder/Tool Runnerï¼‰**ï¼šæ‰§è¡Œå­ä»»åŠ¡ã€è°ƒç”¨å·¥å…·ã€‚
- **Reflector/Reviewer**ï¼šæ£€æŸ¥å®Œæ•´æ€§ä¸æ­£ç¡®æ€§ï¼›ä¸æ»¡è¶³åˆ™å›é€€ç»§ç»­ã€‚
- **Stop Conditions**ï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ã€é¢„ç®—ä¸Šé™ã€æ—¶é—´ä¸Šé™ã€ç”¨æˆ·ä¸­æ–­ã€‚

#### 5.4.2 Orchestrator å®ç°çš„ä¸¤æ¡è·¯çº¿

> è¿™æ˜¯ä¸€ä¸ªå…³é”®çš„â€œå¯é æ€§å†³ç­–â€ï¼šä¸åŒå›¢é˜Ÿåå¥½ä¸åŒã€‚

- **è·¯çº¿ Aï¼šLangGraphï¼ˆPython ç”Ÿæ€ï¼‰**
  - é€‚åˆä½ æƒ³è¦å¼ºæ§åˆ¶ã€å¯è§†åŒ–çŠ¶æ€æœºã€æ–­ç‚¹æ¢å¤ã€Human-in-the-loopï¼ˆå¯ä¸­æ–­ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼‰ã€‚
  - å…¸å‹åœºæ™¯ï¼šå†™ä»£ç  â†’ è¿è¡Œ â†’ è¯»æŠ¥é”™ â†’ ä¿®å¤ â†’ å†è¿è¡Œã€‚

- **è·¯çº¿ Bï¼šclaude-flow é€‚é…å±‚ï¼ˆNode/Claude Code ç”Ÿæ€ï¼‰**
  - é€‚åˆç›´æ¥å¤ç”¨ claude-flow çš„ swarm ç¼–æ’èƒ½åŠ›ã€å·¥å…·ç”Ÿæ€ä¸æ—¢æœ‰æ–¹æ³•è®ºã€‚
  - MacCortex åªéœ€è¦æä¾› macOS è¾“å…¥å±‚ + Policy + Audit + Context æ³¨å…¥ã€‚

> v1 å»ºè®®ç­–ç•¥ï¼šå…ˆé€‰ **ä¸€æ¡è·¯çº¿**åšé€šï¼Œå†åšé€‚é…å±‚å…¼å®¹ç¬¬äºŒæ¡ã€‚é¿å…â€œåŒçº¿å¼€å‘â€ç›´æ¥æŠŠé¡¹ç›®æ‹–æ­»ã€‚

---

### 5.5 L3 è®°å¿†å±‚ï¼ˆInfrastructureï¼‰ï¼šContext / Vector / History

#### 5.5.1 çŸ­æœŸä¸Šä¸‹æ–‡ï¼ˆcontext.jsonï¼‰

- åªä¿å­˜â€œå½“å‰ä»»åŠ¡å¿…éœ€ä¿¡æ¯â€ï¼ˆå±å¹• OCRã€é€‰æ‹©å†…å®¹ã€æ´»åŠ¨åº”ç”¨ã€è·¯å¾„ç­‰ï¼‰ã€‚
- ç”Ÿå‘½å‘¨æœŸï¼šåˆ†é’Ÿçº§æˆ–ä¸€æ¬¡ä»»åŠ¡çº§ï¼Œé»˜è®¤ä»»åŠ¡ç»“æŸæ¸…ç©ºã€‚

#### 5.5.2 é•¿æœŸè®°å¿†ï¼ˆVector Memoryï¼‰

- å­˜å‚¨å†…å®¹ï¼šåå¥½ã€å¸¸ç”¨è·¯å¾„ã€å¸¸è§ä»»åŠ¡ç»“æœã€å¤±è´¥åŸå› ã€å·²éªŒè¯ç»“è®ºã€‚
- è®¾è®¡è¦æ±‚ï¼š
  - å¯é…ç½®â€œå“ªäº›å†…å®¹å…è®¸å…¥åº“â€ï¼ˆPII/å¯†é’¥/æ•æ„Ÿç‰‡æ®µé»˜è®¤ç¦æ­¢ï¼‰
  - å¯å¯¼å‡º/å¯åˆ é™¤ï¼ˆç”¨æˆ·å¯æ§ï¼‰

#### 5.5.3 å†å²ç³»ç»Ÿï¼ˆHistory Storeï¼‰

- ä¿å­˜ï¼šä»»åŠ¡è½¨è¿¹ã€å·¥å…·è°ƒç”¨ã€æ–‡ä»¶å˜æ›´ diffã€å…³é”®ä¸­é—´äº§ç‰©ã€‚
- ç›®æ ‡ï¼šå¯å¤ç›˜ã€å¯å¤ç”¨ã€å¯åšå›å½’æµ‹è¯•æ•°æ®é›†ã€‚

---

### 5.6 L4 æ‰§è¡Œå±‚ï¼ˆExecutionï¼‰ï¼šShell / macOS Bridge / Sandbox

#### 5.6.1 Shell æ‰§è¡Œï¼ˆæ¨èï¼šOpen Interpreter æˆ–ç­‰ä»·æ‰§è¡Œå™¨ï¼‰

- æ‰§è¡Œå™¨è´Ÿè´£ï¼š
  - è¿è¡Œ Python/Bash/Node ç­‰
  - æ•è· stdout/stderr
  - å°†é”™è¯¯å›ä¼ ç»™ SwarmEngine è¿›å…¥ä¿®å¤å¾ªç¯

#### 5.6.2 macOS åŸç”Ÿ App æ§åˆ¶ï¼ˆBridgeï¼‰

- é‡‡ç”¨ JXA/AppleScript/Shortcuts çš„æ–¹å¼å¯¹ Notes/Mail/Calendar/Finder ç­‰è¿›è¡Œå¯æ§æ“ä½œã€‚
- æ‰€æœ‰åŠ¨ä½œå¿…é¡»è¾“å‡ºâ€œå°†åšä»€ä¹ˆâ€çš„æ‘˜è¦ï¼Œå¹¶è¿›å…¥ Policy å®¡æ‰¹ã€‚

#### 5.6.3 æƒé™ç­–ç•¥ï¼ˆé Sandbox æ¶æ„ï¼‰âš ï¸

> **é‡è¦æ¶æ„å†³ç­–ï¼ˆADR-001ï¼‰**ï¼šMacCortex é‡‡ç”¨ **é App Sandbox æ¶æ„**ï¼ŒåŸå› ï¼š
> - Full Disk Access æƒé™ä¸ App Sandbox äº’æ–¥ï¼ˆmacOS é™åˆ¶ï¼‰
> - JXA/AppleScript æ§åˆ¶ Notes/Mail/Finder éœ€è¦é Sandbox ç¯å¢ƒ
> - å†³ç­–æ—¥æœŸï¼š2026-01-20ï¼ˆPhase 0.5 å®æ–½è¿‡ç¨‹ä¸­ç¡®å®šï¼‰

**ä¸‰é‡é˜²æŠ¤æœºåˆ¶ï¼ˆæ›¿ä»£ Sandboxï¼‰**

1. **Hardened Runtime**ï¼šä»£ç ç­¾å + Entitlements ä¸¥æ ¼é™åˆ¶
2. **Policy Engine**ï¼šR0-R3 é£é™©åˆ†çº§ + å·¥å…·ç™½åå•
3. **å—æ§ç›®å½•**ï¼šé»˜è®¤åªå…è®¸åœ¨ Workspace å†…å†™å…¥

**æ–‡ä»¶è®¿é—®ç­–ç•¥**
- âœ… **å…è®¸è¯»å–**ï¼š`~/MacCortexWorkspace/**`ã€ç”¨æˆ·æˆæƒçš„ Full Disk Access è·¯å¾„
- âš ï¸ **éœ€ç¡®è®¤å†™å…¥**ï¼š`~/MacCortexWorkspace/**`ï¼ˆé»˜è®¤éœ€ dry-run/diff é¢„è§ˆï¼‰
- âŒ **ç¦æ­¢å†™å…¥**ï¼š`/System`ã€`/Library`ã€`/usr`ã€`~/.ssh`ã€`~/Library/Keychains`

**ç¬¦å·é“¾æ¥é˜²æŠ¤**
- æ‰€æœ‰æ–‡ä»¶æ“ä½œå‰è§£æçœŸå®è·¯å¾„ï¼ˆ`realpath`ï¼‰
- æ‹’ç»æŒ‡å‘ç¦æ­¢åŒºåŸŸçš„ç¬¦å·é“¾æ¥

---

### 5.7 æ‰©å±•å±‚ï¼šMCPï¼ˆå¯é€‰ä½†å¼ºçƒˆå»ºè®®ï¼‰

MCPï¼ˆModel Context Protocolï¼‰æ˜¯å°†â€œå·¥å…·/èµ„æº/æç¤ºâ€ä»¥æ ‡å‡†æ–¹å¼æ¥å…¥ LLM åº”ç”¨çš„åè®®ç”Ÿæ€ã€‚

**MacCortex çš„ç”¨æ³•**

- æŠŠå¤–éƒ¨å·¥å…·ï¼ˆæœç´¢ã€GitHubã€æ•°æ®åº“ã€ç¬”è®°ç³»ç»Ÿã€å†…éƒ¨æœåŠ¡ï¼‰ç»Ÿä¸€å°è£…æˆ MCP Servers
- Brain/Swarm é€šè¿‡ MCP Client å‘ç°ã€è°ƒç”¨å·¥å…·

**å®‰å…¨æ³¨æ„äº‹é¡¹**

- MCP Server è§†ä¸ºæ½œåœ¨æ¶æ„ä»£ç æ¥æºï¼›å¿…é¡»çº³å…¥ä¾›åº”é“¾ä¿¡ä»»ä¸æƒé™éš”ç¦»ã€‚
- ç¦æ­¢â€œæœªçŸ¥æ¥æº serverâ€é»˜è®¤æ‹¥æœ‰æ–‡ä»¶ç³»ç»Ÿè¯»å†™æƒé™ã€‚

---

## 6. å…³é”®ä½¿ç”¨åœºæ™¯

| åœºæ™¯åˆ†ç±» | ç”¨æˆ·æŒ‡ä»¤ç¤ºä¾‹ | å¤„ç†è·¯å¾„ | é¢„æœŸåŠ¨ä½œ |
|---|---|---|---|
| ä¿¡æ¯å¤„ç† | â€œæ€»ç»“è¿™ç¯‡ PDF çš„æ ¸å¿ƒè§‚ç‚¹ï¼Œç”¨è¿™ç§è¯­æ°”â€¦â€ | Fast Laneï¼ˆPatternï¼‰ | è¯»å–é€‰ä¸­æ–‡æœ¬/æ®µè½ â†’ è¿è¡Œ `summarize_*` Pattern â†’ è¾“å‡º Markdown |
| å¤æ‚è°ƒç ” | â€œç ”ç©¶å‰éš†å¡æœ€å¥½çš„ 3 å®¶ç§ç«‹åŒ»é™¢ï¼Œåšæˆå¯¹æ¯”è¡¨æ ¼å­˜å…¥ Notesâ€ | Slow Laneï¼ˆSwarmï¼‰ | Research â†’ æå–ç»“æ„åŒ–å­—æ®µ â†’ è¡¨æ ¼åŒ– â†’ Bridge å†™å…¥ Notes |
| ç³»ç»Ÿæ“ä½œ | â€œæŠŠ Downloads é‡Œæ‰€æœ‰ png ç§»åˆ° Imagesâ€ | Executionï¼ˆå—æ§ï¼‰ | ç”Ÿæˆ shell è„šæœ¬ â†’ dry-run é¢„è§ˆ â†’ ç”¨æˆ·ç¡®è®¤ â†’ æ‰§è¡Œ |
| ç¼–ç¨‹å¼€å‘ | â€œå†™ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆï¼Œè¿è¡Œçœ‹çœ‹â€ | Slow Laneï¼ˆSwarmï¼‰ | Coder å†™ä»£ç  â†’ æ‰§è¡Œå™¨è¿è¡Œ â†’ è¯»æŠ¥é”™ â†’ ä¿®å¤ â†’ é€šè¿‡éªŒæ”¶ |
| å®‰å…¨å·¥ä½œæµï¼ˆå¯é€‰ï¼‰ | â€œå¯¹è¿™ä¸ªä»“åº“åšä¸€æ¬¡å¿«é€Ÿå¨èƒå»ºæ¨¡å¹¶è¾“å‡º checklistâ€ | Fast/Slow çš†å¯ | Pattern è¾“å‡ºæ¨¡æ¿ +ï¼ˆå¯é€‰ï¼‰Swarm æ‹‰å–ä»£ç ç»“æ„å¹¶è¡¥å…… |

---

## 7. æŠ€æœ¯æ ˆä¸å¯æ›¿æ¢ç»„ä»¶

> åŸåˆ™ï¼šæ¯å±‚è‡³å°‘æœ‰ä¸€ä¸ªâ€œå¯æ›¿æ¢æ–¹æ¡ˆâ€ï¼Œé¿å…è¢«å•ç‚¹ç»‘å®šã€‚

### 7.1 å»ºè®®æŠ€æœ¯æ ˆï¼ˆv1 æ¨èï¼‰

- **æ ¸å¿ƒè¯­è¨€**ï¼šPython 3.10+ï¼ˆç¼–æ’ã€å·¥å…·è°ƒç”¨ã€æ•°æ®å¤„ç†ï¼‰
- **ç¼–æ’**ï¼šLangGraphï¼ˆSlow Lane å€™é€‰ï¼‰æˆ– claude-flowï¼ˆç”Ÿæ€å¤ç”¨è·¯çº¿ï¼‰
- **æ¨¡å‹æ¥å…¥**ï¼š
  - äº‘ç«¯ï¼šAnthropic Claudeï¼ˆç”¨äºå¤æ‚ç¼–ç¨‹/æ¨ç†ï¼‰
  - æœ¬åœ°ï¼šOllamaï¼ˆè·¯ç”±ã€éšç§ã€è½»ä»»åŠ¡ï¼‰
- **å‘é‡åº“**ï¼šChromaDBï¼ˆæœ¬åœ°ä¼˜å…ˆï¼Œå¯æ›¿æ¢ï¼‰
- **GUI**ï¼š
  - è½»é‡ä¼˜å…ˆï¼šRaycast Extension / SwiftUI
  - è·¨å¹³å°ï¼šElectron / PyQtï¼ˆæˆæœ¬æ›´é«˜ï¼‰
- **macOS ç³»ç»Ÿäº¤äº’**ï¼špyobjc + AppleScript/JXA/Shortcuts
- **å·¥å…·ç”Ÿæ€**ï¼šMCPï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰

### 7.2 ç»„ä»¶æ›¿æ¢æ¸…å•ï¼ˆç¤ºä¾‹ï¼‰

- VectorDBï¼šChroma / SQLite + embeddings / å…¶ä»–å‘é‡åº“
- Orchestratorï¼šLangGraph / claude-flow / è‡ªç ”çŠ¶æ€æœº
- GUIï¼šSwiftUI / Raycast / Electron
- Execution Sandboxï¼šDocker / Lima(è½» VM) / macOS Sandboxï¼ˆè§†å¯è¡Œæ€§ï¼‰

---

## 8. å®‰å…¨æ¨¡å‹ä¸éšç§ç­–ç•¥

### 8.1 å¨èƒæ¨¡å‹ï¼ˆThreat Modelï¼‰

MacCortex çš„é£é™©ä¸ä¼ ç»Ÿ App ä¸åŒï¼šå®ƒä¼šâ€œè¯»ä¸Šä¸‹æ–‡ + è°ƒå·¥å…· + å†™ç³»ç»Ÿâ€ã€‚ä¸»è¦æ”»å‡»é¢ï¼š

1. **Prompt Injection**ï¼šæ¥è‡ªç½‘é¡µã€PDFã€OCR æ–‡æœ¬çš„æ¶æ„æŒ‡ä»¤è¯±å¯¼å·¥å…·æ‰§è¡Œã€‚
2. **å·¥å…·æ»¥ç”¨**ï¼šæ¨¡å‹ç”Ÿæˆå±é™©å‘½ä»¤ï¼ˆrmã€è¦†ç›–ç³»ç»Ÿç›®å½•ã€å¤–å‘æ•æ„Ÿæ–‡ä»¶ï¼‰ã€‚
3. **ä¾›åº”é“¾/æ’ä»¶é£é™©**ï¼šä¸å¯ä¿¡ MCP server/è„šæœ¬ä¾èµ–å¯¼è‡´æ‰§è¡Œæ¶æ„ä»£ç ã€‚
4. **æ•°æ®æ³„éœ²**ï¼šcontextã€æ—¥å¿—ã€è®°å¿†åº“ä¸å½“å­˜å‚¨å¯¼è‡´éšç§æ³„éœ²ã€‚

### 8.2 æ ¸å¿ƒé˜²æŠ¤æœºåˆ¶ï¼ˆv1 å¿…é¡»å…·å¤‡ï¼‰

- **Policy Engineï¼ˆå¼ºåˆ¶ï¼‰**ï¼šæ‰€æœ‰å·¥å…·è°ƒç”¨å¿…é¡»å…ˆè¿‡ç­–ç•¥å±‚ã€‚
- **Human-in-the-loopï¼ˆå¼ºåˆ¶ï¼‰**ï¼šå†™/åˆ /å¤–è”é»˜è®¤éœ€è¦ç¡®è®¤ã€‚
- **Dry-run / Diff Previewï¼ˆå¼ºåˆ¶ï¼‰**ï¼šæ–‡ä»¶å˜æ›´å¿…é¡»å…ˆå±•ç¤ºå·®å¼‚ã€‚
- **æœ€å°æƒé™ + å—æ§ç›®å½•ï¼ˆå¼ºåˆ¶ï¼‰**ï¼šé»˜è®¤åªå…è®¸åœ¨ Workspace å†…å†™ã€‚
- **Secrets éš”ç¦»ï¼ˆå¼ºåˆ¶ï¼‰**ï¼šAPI Key å­˜ Keychainï¼Œæ—¥å¿—æ°¸ä¸è½ç›˜å¯†é’¥ã€‚
- **å®¡è®¡æ—¥å¿—ï¼ˆå¼ºåˆ¶ï¼‰**ï¼šè°åœ¨ä½•æ—¶è§¦å‘äº†å“ªä¸ªå·¥å…·ã€æ”¹äº†ä»€ä¹ˆæ–‡ä»¶ã€‚

### 8.3 éšç§ç­–ç•¥ï¼ˆLocal-firstï¼‰

- **é»˜è®¤æœ¬åœ°**ï¼šè·¯ç”±ã€è½»ä»»åŠ¡ã€ç´¢å¼•å°½é‡æœ¬åœ°å®Œæˆã€‚
- **äº‘ç«¯æœ€å°åŒ–**ï¼šåªä¸Šä¼ â€œå®Œæˆä»»åŠ¡å¿…éœ€ç‰‡æ®µâ€ï¼›æ•æ„Ÿä¸Šä¸‹æ–‡é»˜è®¤è„±æ•/ä¸ä¸Šä¼ ã€‚
- **å¯åˆ é™¤æƒ**ï¼šç”¨æˆ·å¯ä»¥ä¸€é”®æ¸…é™¤çŸ­æœŸä¸Šä¸‹æ–‡ã€é•¿æœŸè®°å¿†ä¸å†å²è½¨è¿¹ã€‚

---

## 9. å¯è§‚æµ‹æ€§ä¸è´¨é‡ä¿éšœ

### 9.1 å¯è§‚æµ‹æ€§ï¼ˆObservabilityï¼‰

- è®°å½•ï¼š
  - æ¯æ¬¡ä»»åŠ¡çš„è·¯ç”±å†³ç­–ï¼ˆFast/Slow + åŸå› ï¼‰
  - å·¥å…·è°ƒç”¨é“¾ä¸è€—æ—¶
  - token/æˆæœ¬ï¼ˆäº‘ç«¯ï¼‰
  - è¾“å‡ºè´¨é‡æ ‡æ³¨ï¼ˆç”¨æˆ·åé¦ˆ/è‡ªåŠ¨æ£€æŸ¥ï¼‰

### 9.2 è´¨é‡ä¿éšœï¼ˆTestingï¼‰

- **Pattern å›å½’æµ‹è¯•**ï¼šå›ºå®šè¾“å…¥ â†’ å›ºå®šç»“æ„è¾“å‡ºï¼ˆå…è®¸å†…å®¹å˜åŒ–ï¼Œä½†ç»“æ„è¦ç¨³ï¼‰ã€‚
- **å·¥å…·å®‰å…¨æµ‹è¯•**ï¼šå¯¹å¸¸è§æ³¨å…¥æ ·ä¾‹åšæ‹¦æˆªéªŒè¯ã€‚
- **ç«¯åˆ°ç«¯éªŒæ”¶ç”¨ä¾‹**ï¼šå››ç±»åœºæ™¯è‡³å°‘å„ 3 ä¸ªå¯é‡å¤çš„æµ‹è¯•ä»»åŠ¡ã€‚

---

## 10. å®æ–½è·¯çº¿å›¾ä¸é‡Œç¨‹ç¢‘

> åŸåˆ™ï¼šæ¯ä¸€é˜¶æ®µéƒ½å¿…é¡»æœ‰å¯è¿è¡Œäº¤ä»˜ç‰©ï¼›ç¦æ­¢"å…ˆé€ å¤§åŸå ¡å†è£…é—¨"ã€‚

### Phase 0.5ï¼šmacOS ç­¾åä¸å…¬è¯åŸºç¡€è®¾æ–½ âœ¨ **[å½“å‰è¿›è¡Œä¸­]**

> **é‡è¦æ€§**ï¼šç”Ÿäº§çº§åˆ†å‘èƒ½åŠ›æ˜¯æ‰€æœ‰åç»­ Phase çš„å…ˆå†³æ¡ä»¶ã€‚Phase 0.5 ç¡®ä¿åº”ç”¨èƒ½é€šè¿‡ Gatekeeperï¼Œåˆæ³•è·å–ç³»ç»Ÿæƒé™ï¼Œå¹¶æ”¯æŒè‡ªåŠ¨æ›´æ–°ã€‚

**äº¤ä»˜ç‰©ï¼ˆ10å¤©å·¥æœŸï¼š2026-01-20 ~ 2026-01-27ï¼‰**
- âœ… Developer ID ç­¾å + Hardened Runtime é…ç½®ï¼ˆ`MacCortex.entitlements`ï¼‰
- âœ… Apple å…¬è¯è‡ªåŠ¨åŒ–ï¼ˆ`xcrun notarytool` + GitHub Actions CI/CDï¼‰
- âœ… Full Disk Access æƒé™ç®¡ç†ï¼ˆ`PermissionsKit` Swift Packageï¼‰
- âœ… Sparkle 2 è‡ªåŠ¨æ›´æ–°é›†æˆï¼ˆEdDSA ç­¾åï¼‰
- âœ… é¦–æ¬¡å¯åŠ¨æˆæƒ UIï¼ˆSwiftUI `FirstRunView`ï¼‰
- âœ… ç”¨æˆ·æ•™è‚²èµ„æºï¼ˆFAQ + 60ç§’æ¼”ç¤ºè§†é¢‘è„šæœ¬ï¼‰

**Phase 0.5 éªŒæ”¶æ ‡å‡†ï¼ˆP0 é˜»å¡æ€§ï¼Œå¿…é¡» 100% é€šè¿‡ï¼‰**

| # | éªŒæ”¶é¡¹ | æµ‹è¯•å‘½ä»¤ | æœŸæœ›ç»“æœ | çŠ¶æ€ |
|---|--------|----------|----------|------|
| 1 | **ç­¾åéªŒè¯** | `spctl --assess --type execute MacCortex.app` | è¾“å‡º: `accepted` | â³ Day 3 |
| 2 | **å…¬è¯æˆåŠŸ** | `xcrun stapler validate MacCortex.dmg` | è¾“å‡º: `validate action worked` | â³ Day 4 |
| 3 | **Gatekeeper æ”¾è¡Œ** | ä¸‹è½½ DMG â†’ åŒå‡»å®‰è£… â†’ æ‰“å¼€ | æ— å®‰å…¨è­¦å‘Šï¼Œç›´æ¥å¯åŠ¨ | â³ Day 4 |
| 4 | **æˆæƒæµç¨‹** | é¦–æ¬¡å¯åŠ¨ â†’ å¼•å¯¼ â†’ æˆæƒ FDA + Accessibility | æ€»è€—æ—¶ < 60 ç§’ | â³ Day 8 |
| 5 | **Sparkle æ£€æµ‹** | åº”ç”¨å†…ã€Œæ£€æŸ¥æ›´æ–°ã€ | æ˜¾ç¤ºæ›´æ–°çŠ¶æ€ | â³ Day 10 |

**å…³é”®æ¶æ„å†³ç­–ï¼ˆADR-001ï¼‰**
- âŒ **ä¸é‡‡ç”¨ App Sandbox**ï¼šFull Disk Access ä¸ App Sandbox äº’æ–¥
- âœ… **é‡‡ç”¨é Sandbox æ¶æ„**ï¼šHardened Runtime + Policy Engine + å—æ§ç›®å½•
- âœ… **ç‹¬ç«‹åˆ†å‘**ï¼šé App Storeï¼ŒHomebrew Cask + å®˜ç½‘ç›´æ¥ä¸‹è½½
- âœ… **æƒé™ç­–ç•¥**ï¼šFDAï¼ˆå¿…éœ€ï¼‰+ Accessibilityï¼ˆå¯é€‰ä½†æ¨èï¼‰

**Phase 0.5 å®Œæˆåè§£é”**
- âœ… åº”ç”¨å¯åœ¨ä»»æ„ macOS è®¾å¤‡å®‰å…¨åˆ†å‘
- âœ… ç”¨æˆ·å¯æˆæƒ Full Disk Accessï¼ˆè®¿é—®æ–‡ä»¶ç³»ç»Ÿ/Notesï¼‰
- âœ… è‡ªåŠ¨æ›´æ–°æœºåˆ¶å°±ç»ªï¼ˆæ— éœ€ç”¨æˆ·æ‰‹åŠ¨ä¸‹è½½ï¼‰
- âœ… ä¸º Phase 1-4 æ‰«æ¸…æ‰€æœ‰åˆ†å‘ä¸æƒé™éšœç¢

---

### Phase 0ï¼šå·¥ç¨‹åŸºåº§ï¼ˆFoundationï¼‰

**äº¤ä»˜**
- é¡¹ç›®éª¨æ¶ + æ—¥å¿—/å®¡è®¡ + secrets ç®¡ç†
- `context.json` ç”Ÿæˆä¸è¯»å–

**éªŒæ”¶**
- ä»»æ„ä¸€æ¬¡è¿è¡Œéƒ½èƒ½ç”Ÿæˆå¯è¯»çš„ traceï¼ˆåŒ…æ‹¬è·¯ç”±ç»“æœä¸å·¥å…·è°ƒç”¨ï¼‰

### Phase 1ï¼šMVPï¼ˆFabric Clone / Pattern CLIï¼‰

**äº¤ä»˜**
- `cortex pattern <name>`ï¼šåŠ è½½ Patternï¼Œå¤„ç† stdin
- è¾“å‡ºå·¥ä»¶è½ç›˜ï¼ˆMarkdown + å…ƒæ•°æ®ï¼‰

**éªŒæ”¶**
- æ”¯æŒï¼š`echo "text" | cortex pattern extract_wisdom`

### Phase 2ï¼šDesktop Eyesï¼ˆGUI + Context æ³¨å…¥ï¼‰

**äº¤ä»˜**
- Spotlight é£æ ¼è¾“å…¥æ¡†ï¼ˆæˆ– Raycast Extensionï¼‰
- é€‰ä¸­æ–‡æœ¬ + OCR æ³¨å…¥ context
- **Accessibility æƒé™æˆæƒæµç¨‹**ï¼ˆä¸ Phase 0.5 FDA æƒé™åˆå¹¶å¼•å¯¼ï¼‰
- é™çº§æ¨¡å¼å®ç°ï¼ˆç”¨æˆ·æ‹’ç» Accessibility æ—¶å›é€€åˆ°æ‰‹åŠ¨å¤åˆ¶ï¼‰

**éªŒæ”¶**
- ä¸æ‰‹åŠ¨å¤åˆ¶å†…å®¹ä¹Ÿèƒ½å®Œæˆä¸€æ¬¡ Pattern å¤„ç†
- Accessibility æˆæƒæµç¨‹ < 30 ç§’ï¼ˆä¸ FDA åˆå¹¶åæ€»æ—¶é•¿ < 60 ç§’ï¼‰
- é™çº§æ¨¡å¼å¯ç”¨ï¼ˆæ‹’ç»æˆæƒåä»å¯é€šè¿‡æ‰‹åŠ¨å¤åˆ¶ä½¿ç”¨ 80% åŠŸèƒ½ï¼‰

### Phase 3ï¼šHandsï¼ˆSystem Control + å®‰å…¨å›ç¯ï¼‰

**äº¤ä»˜**
- Shell æ‰§è¡Œå™¨æ¥å…¥
- æ–‡ä»¶ç§»åŠ¨/é‡å‘½åç­‰ R1 çº§æ“ä½œå¯æ‰§è¡Œ
- é»˜è®¤ç¡®è®¤æœºåˆ¶ + dry-run/diff

**éªŒæ”¶**
- å®Œæˆâ€œæ‰¹é‡æ•´ç†ä¸‹è½½æ–‡ä»¶å¤¹â€å¹¶ç•™ä¸‹å¯å®¡è®¡è®°å½•

### Phase 4ï¼šSwarmï¼ˆå¤æ‚ä»»åŠ¡ç¼–æ’ä¸è‡ªçº é”™ï¼‰

**äº¤ä»˜**
- Slow Lane å·¥ä½œæµï¼ˆPlan/Execute/Reflectï¼‰
- Coderâ†”Reviewer å›è·¯
- Stop conditions

**éªŒæ”¶**
- å®Œæˆä¸€ä¸ªå¯è¿è¡Œçš„å°å‹é¡¹ç›®ï¼ˆä¾‹å¦‚æ¸¸æˆ/CLI å·¥å…·ï¼‰ï¼Œå¹¶é€šè¿‡æœ€å°æµ‹è¯•

---

## 11. é£é™©è¯„ä¼°ä¸å¯¹ç­–

| é£é™© | è¡¨ç° | å¯¹ç­– |
|---|---|---|
| å¹»è§‰å¯¼è‡´å±é™©å‘½ä»¤ | ç”Ÿæˆ rmã€è¦†ç›–ã€å¤–å‘ç­‰ | Policy å¼ºåˆ¶æ‹¦æˆªï¼›R2/R3 é»˜è®¤ç¦æ­¢ï¼›dry-run/diff + æ‰‹åŠ¨ç¡®è®¤ |
| API æˆæœ¬ä¸å¯æ§ | Slow Lane å¤šè½®æ¶ˆè€—å¤§ | Router ä¸¥æ ¼åˆ†æµï¼›é¢„ç®—ä¸Šé™ï¼›æœ€å¤§è¿­ä»£ï¼›ä¼˜å…ˆæœ¬åœ°æ¨¡å‹å¤„ç†è½»ä»»åŠ¡ |
| Prompt injection | OCR/ç½‘é¡µå†…å®¹è¯±å¯¼å·¥å…·æ‰§è¡Œ | ä¸å¯ä¿¡è¾“å…¥æ ‡è®°ï¼›å·¥å…·è°ƒç”¨å¿…é¡»ç”± Policy å†³ç­–ï¼›å¯¹å¤–éƒ¨å†…å®¹åšâ€œæŒ‡ä»¤éš”ç¦»â€ |
| æ’ä»¶/ä¾›åº”é“¾é£é™© | MCP server/ä¾èµ–è¢«æŠ•æ¯’ | åªè£…å¯ä¿¡æºï¼›ç‰ˆæœ¬é”å®šï¼›æœ€å°æƒé™ï¼›æ²™ç®±æ‰§è¡Œï¼›å®¡è®¡ |
| éšç§æ³„éœ² | context/æ—¥å¿—/è®°å¿†ä¿å­˜ä¸å½“ | é»˜è®¤æœ¬åœ°ï¼›è„±æ•ï¼›å¯åˆ é™¤ï¼›å¯†é’¥æ°¸ä¸è½ç›˜ |

---

## 12. å¼€æ”¾é—®é¢˜

1. GUI é€‰å‹ï¼šSwiftUI/Raycast/Electron å“ªä¸ªæ›´ç¬¦åˆâ€œè½»é‡é•¿æœŸç»´æŠ¤â€ï¼Ÿ
2. æ‰§è¡Œæ²™ç®±ï¼šDocker vs Lima vs åŸç”Ÿ Sandboxï¼Œå“ªç§åœ¨ macOS ä¸Šä½“éªŒä¸éš”ç¦»æœ€ä½³ï¼Ÿ
3. è®°å¿†ç­–ç•¥ï¼šå“ªäº›å†…å®¹å…è®¸é•¿æœŸå­˜ï¼Ÿå¦‚ä½•æä¾›â€œè®°å¿†å¯è§£é‡Šæ€§â€å’Œâ€œä¸€é”®é—å¿˜â€ï¼Ÿ
4. å¤šæ¨¡å‹ç­–ç•¥ï¼šRouter ç”¨æœ¬åœ°æ¨¡å‹æ—¶ï¼Œå¦‚ä½•ä¿è¯åˆ†ç±»ç¨³å®šæ€§ï¼Ÿéœ€è¦å¤šå°‘æ ‡æ³¨æ•°æ®ï¼Ÿ
5. æ’ä»¶æ²»ç†ï¼šMCP server çš„ä¿¡ä»»ã€ç­¾åã€æƒé™å£°æ˜æœºåˆ¶å¦‚ä½•è½åœ°ï¼Ÿ

---

## é™„å½• Aï¼šå»ºè®®ç›®å½•ç»“æ„

```text
MacCortex/
  apps/
    macos-ui/                 # SwiftUI/Raycast/Electron GUI
  core/
    router/                   # intent + risk scoring
    policy/                   # policies, allowlists, approvals
    patterns/                 # local patterns (Markdown)
    orchestration/            # slow lane graphs / adapters
    memory/
      vector/                 # chroma client
      history/                # traces, artifacts
    tools/
      shell/                  # execution wrapper
      macos/                  # applescript/jxa/shortcuts
      mcp/                    # mcp client integration
  configs/
    policy.yaml
    models.yaml
    logging.yaml
  workspace/                  # default safe write directory
  docs/
    README_ARCH.md
```

---

## é™„å½• Bï¼šContext ä¸ Policy ç¤ºä¾‹

### B.1 context.jsonï¼ˆç¤ºä¾‹ï¼‰

```json
{
  "timestamp": "2026-01-19T00:00:00Z",
  "active_app": "Terminal",
  "window_title": "~/project-x",
  "selection_text": "...",
  "screen_ocr_text": "...",
  "workspace_path": "/Users/you/MacCortexWorkspace/project-x",
  "sensitivity": {
    "contains_secrets": false,
    "contains_personal_data": true
  }
}
```

### B.2 policy.yamlï¼ˆç¤ºä¾‹ï¼‰

```yaml
rules:
  - id: allow_read_workspace
    risk: R0
    tools: ["fs.read", "fs.list", "notes.read"]
    paths:
      - "~/MacCortexWorkspace/**"

  - id: require_confirm_write_workspace
    risk: R1
    tools: ["fs.write", "fs.move", "notes.write"]
    paths:
      - "~/MacCortexWorkspace/**"
    require_user_confirmation: true

  - id: deny_system_paths
    risk: R2
    tools: ["fs.delete", "fs.write", "sys.settings"]
    paths:
      - "/System/**"
      - "/Library/**"
      - "/**"
    action: deny
```

---

## é™„å½• Cï¼šæ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰

> Architecture Decision Records - è®°å½•å…³é”®æŠ€æœ¯å†³ç­–çš„ç†ç”±ã€å½±å“ä¸æƒè¡¡

### ADR-001: é‡‡ç”¨é Sandbox æ¶æ„ï¼ˆ2026-01-20ï¼‰

**èƒŒæ™¯**
- MacCortex éœ€è¦ Full Disk Accessï¼ˆè¯»å–æ–‡ä»¶ç³»ç»Ÿ/Notes/æ—¥å†ç­‰ï¼‰
- éœ€è¦é€šè¿‡ JXA/AppleScript æ§åˆ¶ macOS åŸç”Ÿåº”ç”¨ï¼ˆNotes/Mail/Finderï¼‰

**å†³ç­–**
- âŒ **ä¸é‡‡ç”¨ App Sandbox**
- âœ… **é‡‡ç”¨ Hardened Runtime + Policy Engine + å—æ§ç›®å½•**

**ç†ç”±**
1. **æŠ€æœ¯é™åˆ¶**ï¼šFull Disk Access ä¸ App Sandbox äº’æ–¥ï¼ˆmacOS ç³»ç»Ÿé™åˆ¶ï¼‰
2. **åŠŸèƒ½éœ€æ±‚**ï¼šJXA/AppleScript åœ¨ Sandbox å†…å®Œå…¨æ— æ³•æ§åˆ¶å…¶ä»–åº”ç”¨
3. **å®‰å…¨æ›¿ä»£æ–¹æ¡ˆ**ï¼šä¸‰é‡é˜²æŠ¤ï¼ˆHardened Runtime + Policy Engine + å—æ§ç›®å½•ï¼‰å¯è¾¾åˆ°åŒç­‰å®‰å…¨çº§åˆ«

**å½±å“**
- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ï¼ˆNotes è®¿é—®ã€æ‰¹é‡æ–‡ä»¶æ“ä½œã€ç³»ç»Ÿè‡ªåŠ¨åŒ–ï¼‰
- âŒ æ— æ³•ä¸Šæ¶ Mac App Storeï¼ˆåªèƒ½ç‹¬ç«‹åˆ†å‘ï¼‰
- âœ… å¯é€šè¿‡ Homebrew Caskã€å®˜ç½‘ç›´æ¥ä¸‹è½½åˆ†å‘
- âš ï¸ éœ€è¦ç”¨æˆ·æˆæƒ Full Disk Accessï¼ˆæ•æ„Ÿæƒé™ï¼Œéœ€ä¼˜ç§€çš„å¼•å¯¼ UIï¼‰

**éªŒè¯**
- Phase 0.5 å®æ–½è¿‡ç¨‹ä¸­éªŒè¯ï¼ˆ2026-01-20 ~ 2026-01-27ï¼‰
- æˆåŠŸæ¡ˆä¾‹ï¼šRaycastã€Homebrewã€Docker Desktop å‡é‡‡ç”¨é Sandbox æ¶æ„

**çŠ¶æ€**ï¼šâœ… å·²ç¡®è®¤å¹¶å®æ–½

---

### ADR-002: ä¼˜å…ˆé‡‡ç”¨ LangGraph ä½œä¸º Swarm ç¼–æ’å¼•æ“ï¼ˆå»ºè®®ï¼‰

**èƒŒæ™¯**
- æ–‡æ¡£æå‡ºä¸¤æ¡è·¯çº¿ï¼šLangGraphï¼ˆPythonï¼‰vs claude-flowï¼ˆNode.jsï¼‰
- éœ€è¦åœ¨ Phase 4 å‰æ˜ç¡®é€‰æ‹©

**å»ºè®®å†³ç­–**
- âœ… **ä¼˜å…ˆ LangGraph**
- ğŸ”„ **claude-flow ä½œä¸º Phase 4 åçš„å¯é€‰é€‚é…å±‚**

**ç†ç”±**
1. **æŠ€æœ¯æ ˆä¸€è‡´æ€§**ï¼šPhase 0.5 å·²ç”¨ Python/Swiftï¼ŒLangGraphï¼ˆPythonï¼‰æ— ç¼é›†æˆ
2. **Human-in-the-loop åŸç”Ÿæ”¯æŒ**ï¼šLangGraph çš„ `interrupt` æœºåˆ¶æˆç†Ÿï¼ˆè§ CLAUDE.md è¯æ®æ¸…å•ï¼‰
3. **MLX é›†æˆ**ï¼šä¸æœ¬åœ° MLX æ¨¡å‹ï¼ˆPhase 3+ï¼‰Python åŸç”Ÿå¯¹æ¥
4. **çŠ¶æ€æŒä¹…åŒ–**ï¼šLangGraph çš„æ£€æŸ¥ç‚¹/æ–­ç‚¹æ¢å¤èƒ½åŠ›æ›´å¼º
5. **ç”Ÿæ€æˆç†Ÿåº¦**ï¼šLangChain ç”Ÿæ€ï¼ˆå·¥å…·/Agent/è®°å¿†ç®¡ç†ï¼‰å¯å¤ç”¨

**æƒè¡¡**
- âŒ claude-flow çš„ 87 ä¸ª MCP å·¥å…·ç”Ÿæ€æ— æ³•ç›´æ¥å¤ç”¨
- âœ… ä½†å¯é€šè¿‡ MCP Clientï¼ˆPythonï¼‰æ¥å…¥ç›¸åŒçš„ MCP Servers
- âš ï¸ å›¢é˜Ÿéœ€å­¦ä¹  LangGraph çŠ¶æ€å›¾è®¾è®¡ï¼ˆå­¦ä¹ æ›²çº¿çº¦ 1-2 å‘¨ï¼‰

**å½±å“**
- Phase 4 å·¥æœŸä¿æŒ 6 å‘¨ï¼ˆLangGraph å­¦ä¹  + ç¼–æ’å®ç° + æµ‹è¯•ï¼‰
- Phase 5ï¼ˆå¯é€‰ï¼‰å¯å¢åŠ  claude-flow é€‚é…å±‚ï¼Œæ”¯æŒ Node.js å·¥å…·ç”Ÿæ€

**çŠ¶æ€**ï¼šğŸ’¬ å¾…æœ€ç»ˆç¡®è®¤ï¼ˆå»ºè®®åœ¨ Phase 3 ç»“æŸå‰å†³ç­–ï¼‰

---

### ADR-003: Accessibility + Full Disk Access ç»Ÿä¸€æˆæƒå¼•å¯¼ï¼ˆå»ºè®®ï¼‰

**èƒŒæ™¯**
- MacCortex éœ€è¦ä¸¤ä¸ªæ•æ„Ÿæƒé™ï¼šFDAï¼ˆå¿…éœ€ï¼‰+ Accessibilityï¼ˆæ¨èï¼‰
- ç”¨æˆ·å¯¹å¤šæ¬¡æ•æ„Ÿæƒé™è¯·æ±‚çš„å®¹å¿åº¦ä½ï¼ˆæ‹’ç»ç‡å¯èƒ½è¾¾ 30-40%ï¼‰

**å»ºè®®å†³ç­–**
- âœ… **åœ¨é¦–æ¬¡å¯åŠ¨æ—¶ç»Ÿä¸€è¯´æ˜ä¸¤ä¸ªæƒé™**
- âœ… **æä¾› 15 ç§’æ¼”ç¤ºè§†é¢‘ï¼ˆä¸€æ¬¡æ€§å±•ç¤ºæ‰€æœ‰æ­¥éª¤ï¼‰**
- âœ… **æ”¯æŒ"ç¨åæˆæƒ"é™çº§æ¨¡å¼**

**ç†ç”±**
1. **ç”¨æˆ·ä½“éªŒ**ï¼šä¸€æ¬¡æ€§è®²æ¸…æ¥šèƒœè¿‡åˆ†ä¸¤æ¬¡æ‰“æ‰°
2. **è½¬åŒ–ç‡ä¼˜åŒ–**ï¼šé™ä½"ç¬¬äºŒæ¬¡è¢«æ‹’ç»"çš„æ¦‚ç‡
3. **é™çº§å‹å¥½**ï¼šæ‹’ç» Accessibility ä»å¯ç”¨ 80% åŠŸèƒ½ï¼ˆæ‰‹åŠ¨å¤åˆ¶æ¨¡å¼ï¼‰

**å½±å“**
- Phase 0.5 å®ç° FDA æˆæƒ UI
- Phase 2 å¢å¼º UIï¼Œåˆå¹¶ Accessibility æˆæƒè¯´æ˜
- Phase 2 éªŒæ”¶æ ‡å‡†ï¼šä¸¤ä¸ªæƒé™æˆæƒæ€»æ—¶é•¿ < 60 ç§’

**çŠ¶æ€**ï¼šğŸ’¬ å¾… Phase 2 å®æ–½ï¼ˆ2026-01 ä¸‹æ—¬ï¼‰

---

## å‚è€ƒä¸ä¸Šæ¸¸é¡¹ç›®

> ä»¥ä¸‹é“¾æ¥ç”¨äºâ€œå¯éªŒè¯äº‹å®æ¥æºâ€ã€‚æœ¬é¡¹ç›®ä¸éš¶å±äºè¿™äº›ä¸Šæ¸¸ä»“åº“ï¼›MacCortex æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¶æ„è®¾è®¡ä¸å®ç°è®¡åˆ’ã€‚

- claude-flowï¼ˆSwarm ç¼–æ’ç”Ÿæ€ï¼‰
  - https://github.com/ruvnet/claude-flow
  - https://github.com/ruvnet/claude-flow/wiki

- Personal AI Infrastructureï¼ˆä¸ªäººåŸºå»ºæ¡†æ¶ï¼‰
  - https://github.com/danielmiessler/Personal_AI_Infrastructure

- Fabricï¼ˆPatterns/Prompt æ¨¡å¼åº“ï¼‰
  - https://github.com/danielmiessler/Fabric

- LangGraphï¼ˆå¾ªç¯å›¾/çŠ¶æ€æœºç¼–æ’ï¼‰
  - https://github.com/langchain-ai/langgraph
  - https://docs.langchain.com/oss/python/langgraph/overview

- Open Interpreterï¼ˆå·¥å…·æ‰§è¡Œ/ä»£ç è¿è¡Œï¼‰
  - https://github.com/openinterpreter/open-interpreter
  - https://docs.openinterpreter.com/

- MCPï¼ˆModel Context Protocolï¼‰
  - https://modelcontextprotocol.io/
  - https://github.com/modelcontextprotocol/servers

- Chromaï¼ˆæœ¬åœ°å‘é‡æ£€ç´¢/è®°å¿†å­˜å‚¨å€™é€‰ï¼‰
  - https://github.com/chroma-core/chroma

- Ollamaï¼ˆæœ¬åœ°æ¨¡å‹è¿è¡Œå€™é€‰ï¼‰
  - https://github.com/ollama/ollama

---

**æ–‡æ¡£ç»´æŠ¤è®°å½•**

- âœ… **v1.1 (2026-01-20)**ï¼šä¿®æ­£ Sandbox ç­–ç•¥çŸ›ç›¾ï¼Œå¢åŠ  Phase 0.5 é‡Œç¨‹ç¢‘ï¼Œæ–°å¢é™„å½• Cï¼ˆADRï¼‰
- ğŸ“‹ **v1.2ï¼ˆå¾…å®šï¼‰**ï¼šè¡¥"è·¯ç”±ä¸ç­–ç•¥å†³ç­–çš„å¯è§£é‡Šæ€§"ï¼ˆä¸ºä»€ä¹ˆèµ° Fast/Slowã€ä¸ºä»€ä¹ˆæ‹’ç»å·¥å…·ï¼‰
- ğŸ“‹ **v1.3ï¼ˆå¾…å®šï¼‰**ï¼šè¡¥"æ’ä»¶æƒé™å£°æ˜ï¼ˆcapabilitiesï¼‰ä¸ç­¾åæœºåˆ¶"
- ğŸ“‹ **v1.4ï¼ˆå¾…å®šï¼‰**ï¼šè¡¥"è¯„ä¼°åŸºå‡†ï¼ˆBenchmark tasksï¼‰ä¸å®‰å…¨æµ‹è¯•é›†"

**v1.1 ä¸»è¦å˜æ›´ï¼ˆ2026-01-20ï¼‰**

| å˜æ›´ç±»å‹ | ç« èŠ‚ | å†…å®¹ |
|---------|------|------|
| ğŸ”´ **ä¿®æ­£çŸ›ç›¾** | 5.6.3 | åˆ é™¤ Sandbox å¼ºåˆ¶è¦æ±‚ï¼Œæ”¹ä¸º"é Sandbox + ä¸‰é‡é˜²æŠ¤" |
| âš ï¸ **è¡¥å……ç¼ºå¤±** | 5.1 | å¢åŠ  Accessibility æƒé™è¯´æ˜ä¸é™çº§ç­–ç•¥ |
| âœ¨ **æ–°å¢é‡Œç¨‹ç¢‘** | 10 | æ’å…¥ Phase 0.5ï¼ˆç­¾åä¸å…¬è¯åŸºç¡€è®¾æ–½ï¼‰ |
| ğŸ“‹ **æ¶æ„å†³ç­–** | é™„å½• C | æ–°å¢ ADR-001ï¼ˆé Sandboxï¼‰ã€ADR-002ï¼ˆLangGraphï¼‰ã€ADR-003ï¼ˆç»Ÿä¸€æˆæƒï¼‰ |
| ğŸ“ **å…ƒä¿¡æ¯æ›´æ–°** | å…ƒä¿¡æ¯è¡¨ | ç‰ˆæœ¬ v1.0 â†’ v1.1ï¼Œå¢åŠ "åˆ†å‘ç­–ç•¥"è¡Œ |
